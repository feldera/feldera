(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{2401:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var i=r(7462),n=r(3366),o=r(7294),s=r(6010),l=r(4780),a=r(948),c=r(1657),u=r(5861),d=r(1588),h=r(4867);function p(e){return(0,h.Z)("MuiAlertTitle",e)}(0,d.Z)("MuiAlertTitle",["root"]);var m=r(5893);let f=["className"],g=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},p,t)},x=(0,a.ZP)(u.Z,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2})),b=o.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiAlertTitle"}),{className:o}=r,l=(0,n.Z)(r,f),a=g(r);return(0,m.jsx)(x,(0,i.Z)({gutterBottom:!0,component:"div",ownerState:r,ref:t,className:(0,s.Z)(a.root,o)},l))});var v=b},747:function(e,t,r){"use strict";r.d(t,{A:function(){return o}});var i=r(7294);let n=()=>i.useRef({}),o=n},853:function(e,t,r){"use strict";r.d(t,{M:function(){return w}});var i=r(7462),n=r(3366),o=r(7294),s=r(948),l=r(4780),a=r(263),c=r(8216),u=r(198),d=r(4696),h=r(1207),p=r(269),m=r(7476),f=r(9630),g=r(8836),x=r(3490),b=r(5893);let v=["componentsProps"],j=e=>{let{classes:t}=e;return(0,l.Z)({root:["toolbarFilterList"]},x.d,t)},y=(0,s.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,t)=>t.toolbarFilterList})(({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)})),w=o.forwardRef(function(e,t){var r,s;let{componentsProps:l={}}=e,x=(0,n.Z)(e,v),w=l.button||{},Z=(0,f.l)(),C=(0,g.B)(),R=(0,d.P)(Z,h.DY),S=(0,d.P)(Z,u.WH),E=(0,d.P)(Z,p.e),M=j(C),_=o.useMemo(()=>{if(E.open)return Z.current.getLocaleText("toolbarFiltersTooltipHide");if(0===R.length)return Z.current.getLocaleText("toolbarFiltersTooltipShow");let e=e=>S[e.columnField].filterOperators.find(t=>t.value===e.operatorValue).label||Z.current.getLocaleText(`filterOperator${(0,c.Z)(e.operatorValue)}`).toString(),t=e=>{let{getValueAsString:t}=S[e.columnField].filterOperators.find(t=>t.value===e.operatorValue);return t?t(e.value):e.value};return(0,b.jsxs)("div",{children:[Z.current.getLocaleText("toolbarFiltersTooltipActive")(R.length),(0,b.jsx)(y,{className:M.root,ownerState:C,children:R.map((r,n)=>(0,i.Z)({},S[r.columnField]&&(0,b.jsx)("li",{children:`${S[r.columnField].headerName||r.columnField}
                  ${e(r)}
                  ${r.value?t(r):""}`},n)))})]})},[Z,C,E.open,R,S,M]),P=e=>{var t;let{open:r,openedPanelValue:i}=E;r&&i===m.y.filters?Z.current.hideFilterPanel():Z.current.showFilterPanel(),null==(t=w.onClick)||t.call(w,e)};return C.disableColumnFilter?null:(0,b.jsx)(C.components.BaseTooltip,(0,i.Z)({title:_,enterDelay:1e3},x,null==(r=C.componentsProps)?void 0:r.baseTooltip,{children:(0,b.jsx)(C.components.BaseButton,(0,i.Z)({ref:t,size:"small","aria-label":Z.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,b.jsx)(a.Z,{badgeContent:R.length,color:"primary",children:(0,b.jsx)(C.components.OpenFilterButtonIcon,{})})},w,{onClick:P},null==(s=C.componentsProps)?void 0:s.baseButton,{children:Z.current.getLocaleText("toolbarFilters")}))}))})},2886:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/analytics/programs",function(){return r(2322)}])},613:function(e,t,r){"use strict";var i=r(5893),n=r(7294),o=r(7918),s=r(2734),l=r(5812);let a=n.forwardRef((e,t)=>{let{sx:r,skin:n,color:a}=e,c=(0,s.Z)(),u={default:{color:c.palette.primary.main,backgroundColor:(0,l.E)(c.palette.primary.main,.16)},primary:{color:c.palette.primary.main,backgroundColor:(0,l.E)(c.palette.primary.main,.16)},secondary:{color:c.palette.secondary.main,backgroundColor:(0,l.E)(c.palette.secondary.main,.16)},success:{color:c.palette.success.main,backgroundColor:(0,l.E)(c.palette.success.main,.16)},error:{color:c.palette.error.main,backgroundColor:(0,l.E)(c.palette.error.main,.16)},warning:{color:c.palette.warning.main,backgroundColor:(0,l.E)(c.palette.warning.main,.16)},info:{color:c.palette.info.main,backgroundColor:(0,l.E)(c.palette.info.main,.16)}},d={...e,ref:t};return d.rounded=void 0,(0,i.jsx)(o.Z,{...d,variant:"filled",className:"MuiChip-rounded MuiChip-light",sx:"light"===n&&a?Object.assign(u[a],r):r})});t.Z=a},8639:function(e,t,r){"use strict";var i=r(5893),n=r(7294),o=r(6242),s=r(7987),l=r(3527),a=r(9429),c=r(4386),u=r(3946),d=r(1954),h=r(9461);let p=e=>{let{setRows:t,fetchRows:r,onUpdateRow:p,onDeleteRow:m,onEditClicked:f,tableProps:g,addActions:x}=e,[b,v]=(0,n.useState)(7),[j,y]=(0,n.useState)(""),[w,Z]=(0,n.useState)([]),{isLoading:C,isError:R,data:S,error:E}=r;x&&g.columns.push({flex:.1,minWidth:90,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>(0,i.jsxs)(i.Fragment,{children:[f&&(0,i.jsx)(c.Z,{title:"Edit",children:(0,i.jsx)(u.Z,{size:"small",onClick:t=>{t.preventDefault(),f(e.row)},children:(0,i.jsx)(d.JO,{icon:"bx:pencil",fontSize:20})})}),m&&(0,i.jsx)(c.Z,{title:"Delete",children:(0,i.jsx)(u.Z,{size:"small",onClick:()=>m(e.row),children:(0,i.jsx)(d.JO,{icon:"bx:trash-alt",fontSize:20})})})]})}),(0,n.useEffect)(()=>{C||R||t(S)},[C,R,S,t]);let M=e=>{if(y(e),0==e.length){Z([]);return}let t=RegExp((0,a.hr)(e),"i");if(!C&&!R){let e=S.filter(e=>Object.keys(e).some(r=>{if(null!==e[r])return t.test(e[r].toString())}));Z(e)}};return(0,i.jsx)(o.Z,{children:(0,i.jsx)(s.s,{...g,autoHeight:!0,experimentalFeatures:{newEditingApi:!0},apiRef:e.apiRef,components:{Toolbar:h.Z,ErrorOverlay:l.f},rows:w.length?w:g.rows,pageSize:b,rowsPerPageOptions:[7,10,25,50],onPageSizeChange:e=>v(e),processRowUpdate:p,error:E,loading:C,componentsProps:{baseButton:{variant:"outlined"},toolbar:{hasSearch:e.hasSearch,hasFilter:e.hasFilter,value:j,clearSearch:()=>M(""),onChange:e=>M(e.target.value)},errorOverlay:{isError:R,error:E}}})})};t.Z=p},3527:function(e,t,r){"use strict";r.d(t,{f:function(){return s}});var i=r(5893),n=r(6901),o=r(2401);let s=e=>e.isError?(0,i.jsxs)(n.Z,{severity:"error",children:[(0,i.jsx)(o.Z,{children:"Error"}),"Can't display programs: ",(0,i.jsx)("strong",{children:e.error.message}),(0,i.jsx)("br",{}),"Check network connectivity, then try to refresh the page. ."]}):(0,i.jsx)(i.Fragment,{})},9461:function(e,t,r){"use strict";var i=r(5893),n=r(7357),o=r(135),s=r(3946),l=r(853),a=r(1954);let c=e=>(0,i.jsxs)(n.Z,{sx:{gap:2,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",p:e=>e.spacing(2,6,4,6)},children:[e.hasFilter&&(0,i.jsx)(l.M,{}),e.hasSearch&&(0,i.jsx)(o.Z,{size:"small",value:e.value,onChange:e.onChange,placeholder:"Searchâ€¦",InputProps:{startAdornment:(0,i.jsx)(n.Z,{sx:{mr:2,display:"flex"},children:(0,i.jsx)(a.JO,{icon:"bx:search",fontSize:20})}),endAdornment:(0,i.jsx)(s.Z,{size:"small",title:"Clear","aria-label":"Clear",onClick:e.clearSearch,children:(0,i.jsx)(a.JO,{icon:"bx:x",fontSize:20})})},sx:{width:{xs:1,sm:"auto"},"& .MuiInputBase-root > svg":{mr:2}}})]});t.Z=c},9541:function(e,t,r){"use strict";var i=r(5893),n=r(6886);let o=e=>{let{title:t,subtitle:r}=e;return(0,i.jsxs)(n.ZP,{item:!0,xs:12,children:[t,r]})};t.Z=o},2322:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var i=r(5893),n=r(6886),o=r(5861),s=r(9541),l=r(1163),a=r(7294),c=r(7357),u=r(6242),d=r(747),h=r(7848),p=r(5945),m=r(8228),f=r(1345),g=r(613),x=r(8570),b=r(8639),v=r(6981);let j=e=>(0,f.EQ)(e).with({SqlError:f.P._},()=>({title:"SQL Error",color:"error"})).with({RustError:f.P._},()=>({title:"Rust Error",color:"error"})).with({SystemError:f.P._},()=>({title:"System Error",color:"error"})).with("Pending",()=>({title:"Compiling",color:"primary"})).with("CompilingSql",()=>({title:"Compiling",color:"primary"})).with("CompilingRust",()=>({title:"Building Pipeline",color:"primary"})).with("Success",()=>({title:"Ready",color:"success"})).with("None",()=>({title:"Unused",color:"primary"})).exhaustive(),y=()=>{let e=(0,l.useRouter)(),[t,r]=(0,a.useState)([]),n=(0,h.a)({queryKey:["project"]}),{pushMessage:s}=(0,v.Z)(),f=(0,d.A)(),y=(0,p.NL)(),w=(0,m.D)(x.Y.updateProject),Z=(e,t)=>(w.mutate({project_id:e.project_id,description:e.description,name:e.name},{onError:r=>{y.invalidateQueries(["project"]),y.invalidateQueries(["projectStatus",{project_id:e.project_id}]),s({message:r.message,key:new Date().getTime(),color:"error"}),f.current.updateRows([t])}}),e),C=(0,m.D)(x.Y.deleteProject),R=(0,a.useCallback)(e=>{setTimeout(()=>{let i=t.find(t=>t.project_id===e.project_id);void 0!==i&&C.mutate(e.project_id,{onSuccess:()=>{r(t=>t.filter(t=>t.project_id!==e.project_id))},onError:e=>{s({message:e.message,key:new Date().getTime(),color:"error"}),y.invalidateQueries(["project"])}})})},[y,C,t,s]);return(0,i.jsx)(u.Z,{children:(0,i.jsx)(b.Z,{hasSearch:!0,hasFilter:!0,addActions:!0,tableProps:{getRowId:e=>e.project_id,columnVisibilityModel:{project_id:!1},columns:[{flex:.05,minWidth:50,field:"project_id",headerName:"ID",renderCell:e=>{let{row:t}=e;return(0,i.jsx)(c.Z,{sx:{display:"flex",alignItems:"center"},children:(0,i.jsx)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,i.jsx)(o.Z,{noWrap:!0,variant:"body2",sx:{color:"text.primary",fontWeight:600},children:t.project_id})})})}},{flex:.3,minWidth:290,headerName:"Name",field:"name",editable:!0},{flex:.5,minWidth:110,field:"description",headerName:"Description",renderCell:e=>(0,i.jsx)(o.Z,{variant:"body2",sx:{color:"text.primary"},children:e.row.description}),editable:!0},{flex:.15,minWidth:140,field:"status",headerName:"Status",renderCell:e=>{let t=j(e.row.status);return(0,i.jsx)(g.Z,{rounded:!0,size:"small",skin:"light",color:t.color,label:t.title})}}],rows:t},setRows:r,fetchRows:n,onUpdateRow:Z,onDeleteRow:R,onEditClicked:t=>e.push("/analytics/editor/"+t.project_id),apiRef:f})})},w=()=>(0,i.jsxs)(n.ZP,{container:!0,spacing:6,className:"match-height",children:[(0,i.jsx)(s.Z,{title:(0,i.jsx)(o.Z,{variant:"h5",children:"SQL Programs"}),subtitle:(0,i.jsx)(o.Z,{variant:"body2",children:"View status and edit already defined SQL programs."})}),(0,i.jsx)(n.ZP,{item:!0,xs:12,children:(0,i.jsx)(y,{})})]});var Z=w},9429:function(e,t,r){"use strict";r.d(t,{$R:function(){return l},C$:function(){return a},O1:function(){return o},Qm:function(){return s},hr:function(){return i},ob:function(){return n}});let i=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");function n(e){if(1024>Math.abs(e))return e+" B";let t=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1;do e/=1024,++r;while(Math.abs(e)>=1024&&r<t.length-1);return e.toFixed(1)+" "+t[r]}let o=()=>new Date().getTime().toString(36)+Math.random().toString(36).slice(2),s=(e,t)=>e.startsWith(t)?e.slice(t.length):e,l=(e,t)=>Array.from(Array(Math.max(t.length,e.length)),(r,i)=>[e[i],t[i]]),a={program_name:"Average Price Calculator",program_description:"Calculate the average price of a product",connector_name:"House Price Data",connector_description:"House price data from the UK Land Registry",pipeline_name:"Price Checker",pipeline_description:"Analyze e-commerce prices"}},8228:function(e,t,r){"use strict";r.d(t,{D:function(){return h}});var i=r(7294),n=r(464),o=r(2161),s=r(9886),l=r(81),a=r(3989);class c extends a.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let r=this.options;this.options=this.client.defaultMutationOptions(e),(0,o.VS)(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.listeners.length){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:(0,s.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){l.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,r,i,n,o,s,l,a;e.onSuccess?(null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(i=(n=this.mutateOptions).onSettled)||i.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(o=(s=this.mutateOptions).onError)||o.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(a=this.mutateOptions).onSettled)||l.call(a,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(e=>{e(this.currentResult)})})}}var u=r(5945),d=r(4798);function h(e,t,r){let s=(0,o.lV)(e,t,r),a=(0,u.NL)({context:s.context}),[h]=i.useState(()=>new c(a,s));i.useEffect(()=>{h.setOptions(s)},[h,s]);let m=(0,n.$)(i.useCallback(e=>h.subscribe(l.V.batchCalls(e)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),f=i.useCallback((e,t)=>{h.mutate(e,t).catch(p)},[h]);if(m.error&&(0,d.L)(h.options.useErrorBoundary,[m.error]))throw m.error;return{...m,mutate:f,mutateAsync:m.mutate}}function p(){}}},function(e){e.O(0,[657,325,590,935,987,774,888,179],function(){return e(e.s=2886)}),_N_E=e.O()}]);