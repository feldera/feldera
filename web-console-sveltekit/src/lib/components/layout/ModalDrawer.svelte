<script lang="ts">
  // https://codesandbox.io/p/sandbox/drawer-with-tailwind-css-48z1k3
  import type { Snippet } from 'svelte'
  const openClassNames = {
    right: 'translate-x-0',
    left: 'translate-x-0',
    top: 'translate-y-0',
    bottom: 'translate-y-0'
  }

  const closeClassNames = {
    right: 'translate-x-full',
    left: '-translate-x-full',
    top: '-translate-y-full',
    bottom: 'translate-y-full'
  }

  const classNames = {
    right: 'inset-y-0 right-0',
    left: 'inset-y-0 left-0',
    top: 'inset-x-0 top-0',
    bottom: 'inset-x-0 bottom-0'
  }

  let {
    open = $bindable(),
    side,
    children,
    class: _class
  }: {
    open: boolean
    side: keyof typeof classNames
    children: Snippet
    class: string
  } = $props()
  console.log('open modal', open)
</script>

<div
  role="presentation"
  class="relative z-20"
  onclick={() => {
    console.log('toggle2')
    open = !open
  }}
>
  <div
    class={'fixed inset-0 bg-gray-500 bg-opacity-75 transition-all ' +
      (open
        ? 'visible opacity-100 duration-300 ease-in-out'
        : 'invisible opacity-0 duration-300 ease-in-out')}
  ></div>
  <div class={open ? 'fixed inset-0 overflow-hidden' : ''}>
    <div class="absolute inset-0 overflow-hidden">
      <div class={'pointer-events-none fixed max-w-full ' + classNames[side]}>
        <div
          role="presentation"
          class={'pointer-events-auto relative h-full w-full transform transition duration-300 ease-in-out ' +
            (open ? openClassNames[side] : closeClassNames[side])}
          onclick={(event) => {
            event.stopPropagation()
          }}
        >
          <div
            role="dialog"
            aria-modal="true"
            class={'flex h-full flex-col ' + (open ? ' shadow-xl ' : '') + _class}
          >
            {@render children()}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
